

<!DOCTYPE html>
<html class="">
<head>






<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.21.1"/>
<link rel="icon" href="https://copper-leaf.github.io/ballast/favicon.ico">


<meta name="robots" content="index, follow">



<title>v2 to v3</title>


<meta name="description" content="Opinionated Application State Management framework for Kotlin Multiplatform">



<link rel="prev" href="https://copper-leaf.github.io/ballast/wiki/usage/migration">


<link rel="next" href="https://copper-leaf.github.io/ballast/wiki/usage/migration/v4">


<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/bulma.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/extraCss.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/bulma-tooltip.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/bulma-accordion.min.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/assets/css/orchidSearch.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/PrismJS/prism-themes/master/themes/prism-duotone-light.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/assets/css/mermaid_bulma.css"  />
<!-- end:inject styles -->



<script>
    window.site = {"orchidVersion":"0.21.1","baseUrl":"https://copper-leaf.github.io/ballast","environment":"prod","version":"4.2.1"};
</script>


    <!-- start:inject meta-components [head] -->
    
    <!-- end:inject meta-components [head] -->



    <!-- start:inject meta-components [head] -->
    

        
            
        

        
            
        
            
        
            
        
    
    <!-- end:inject meta-components [head] -->







</head>
<body class="">





    <!-- start:inject meta-components [bodyStart] -->
    
    <!-- end:inject meta-components [bodyStart] -->



    <!-- start:inject meta-components [bodyStart] -->
    

        
            
        

        
    
    <!-- end:inject meta-components [bodyStart] -->





<div class="columns is-marginless is-desktop">

  <div class="column is-one-third-desktop is-one-quarter-widescreen is-one-fifth-fullhd is-paddingless column-main-left is-hidden-mobile is-hidden-touch">
  


    


<section class="hero is-primary is-bold is-fullheight">


<!-- Hero header: will stick at the top -->
<div class="hero-head" style="padding: 0 1.5rem">
  <p class="title is-1 has-text-centered" style="margin-top: 3.5rem; margin-bottom: 2.5rem;">Ballast</p>
  <p class="subtitle is-4 has-text-centered">Opinionated Application State Management framework for Kotlin Multiplatform</p>

  <div id="intellij-plugin-card"></div>

  <div class="columns is-mobile has-text-centered">
  


  


  </div>
</div>




<!-- Hero content: will be in the middle -->
<div class="hero-body">
  <div class="container sidebar-menu">
    <details class="is-hidden-desktop">
      <summary>
        Menu
      </summary>
      <div id="mobile-sidebar-menu"></div>
    </details>
    <div class="is-hidden-touch">
      <aside class="menu" id="responsive-menu-content">
      
  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast 1389865849 -->
  <a href="https://copper-leaf.github.io/ballast" class="">
  
  Home
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-overview 2017959723 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-overview" class="">
  
  Feature Overview
  </a>
</li>

</ul>
  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage 659906939 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage" class="">
  
  Usage Guide
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/mental-model 1703254852 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/mental-model" class="">
  
  Thinking in Ballast MVI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/workflow 228548558 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/workflow" class="">
  
  Workflow
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/architecture 1231370129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/architecture" class="">
  
  Project Architecture
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/migration 1169672575 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/migration" class="">
  
  Migration Guide
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms 1314688755 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms" class="">
  
  Platforms
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/android 134708375 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/android" class="">
  
  Android
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/compose 579227762 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/compose" class="">
  
  Compose
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/ios 1446188993 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/ios" class="">
  
  SwiftUI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs 1566390876 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs" class="">
  
  WasmJS
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/kvision 1846351524 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/kvision" class="">
  
  KVision
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules 2115555031 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules" class="">
  
  Modules
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-core 811287498 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-core" class="">
  
  Ballast Core
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-test 73404487 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-test" class="">
  
  Ballast Test
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation" class="">
  
  Ballast Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics 1854873748 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics" class="">
  
  Ballast Analytics
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting 391333725 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting" class="">
  
  Ballast Crash Reporting
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state 219186182 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state" class="">
  
  Ballast Saved State
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync 2040301400 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync" class="">
  
  Ballast Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo 1845527423 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo" class="">
  
  Ballast Undo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules 1675905101 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules" class="">
  
  Ballast Schedules
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository 1784533123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository" class="">
  
  Ballast Repository
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger 2003188951 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger" class="">
  
  Ballast Debugger
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin 488063551 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin" class="">
  
  Ballast Intellij Plugin
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/community 1550899184 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/community" class="">
  
  Community Libraries
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples 1479396661 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples" class="">
  
  Examples
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/counter 510382691 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/counter" class="">
  
  Counter
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper 961178923 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper" class="">
  
  Scorekeeper
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/sync 1667232421 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/sync" class="">
  
  Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/undo 1437454238 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/undo" class="">
  
  Undo/Redo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/bgg-api 353761154 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/bgg-api" class="">
  
  API Call &amp; Cache
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kitchensink 2136793918 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kitchensink" class="">
  
  Kitchen Sink
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/navigation 1670053034 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/navigation" class="">
  
  Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit 1482694266 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit" class="">
  
  KaMPKit
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc 1651727123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc" class="">
  
  KVision TODOMVC
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform 2058228080 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform" class="">
  
  Shared Compose Multiplatform
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-comparison 1324735779 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-comparison" class="">
  
  MVI Library Comparison
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/roadmap 373197129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/roadmap" class="">
  
  Roadmap
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/changelog 1861083998 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/changelog" class="">
  
  Changelog
  </a>
</li>

</ul>
  


      </aside>
    </div>
  </div>
</div>

<script type="text/javascript">
  function copyElem(fromId, toId) {
    var fromElementContent = document.getElementById(fromId);
    var toElementContent = document.getElementById(toId);
    toElementContent.outerHTML = fromElementContent.outerHTML;
  }

  document.addEventListener("DOMContentLoaded", function (event) {
    copyElem('responsive-menu-content', 'mobile-sidebar-menu');
  });
</script>


</section>

  </div>
  <div class="column is-one-third-desktop is-one-quarter-widescreen is-one-fifth-fullhd is-paddingless column-main-left is-hidden-desktop">
  


    


<section class="hero is-primary is-bold ">


<!-- Hero header: will stick at the top -->
<div class="hero-head" style="padding: 0 1.5rem">
  <p class="title is-1 has-text-centered" style="margin-top: 3.5rem; margin-bottom: 2.5rem;">Ballast</p>
  <p class="subtitle is-4 has-text-centered">Opinionated Application State Management framework for Kotlin Multiplatform</p>

  <div id="intellij-plugin-card"></div>

  <div class="columns is-mobile has-text-centered">
  


  


  </div>
</div>




<!-- Hero content: will be in the middle -->
<div class="hero-body">
  <div class="container sidebar-menu">
    <details class="is-hidden-desktop">
      <summary>
        Menu
      </summary>
      <div id="mobile-sidebar-menu"></div>
    </details>
    <div class="is-hidden-touch">
      <aside class="menu" id="responsive-menu-content">
      
  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast 1389865849 -->
  <a href="https://copper-leaf.github.io/ballast" class="">
  
  Home
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-overview 2017959723 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-overview" class="">
  
  Feature Overview
  </a>
</li>

</ul>
  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage 659906939 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage" class="">
  
  Usage Guide
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/mental-model 1703254852 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/mental-model" class="">
  
  Thinking in Ballast MVI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/workflow 228548558 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/workflow" class="">
  
  Workflow
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/architecture 1231370129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/architecture" class="">
  
  Project Architecture
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/migration 1169672575 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/migration" class="">
  
  Migration Guide
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms 1314688755 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms" class="">
  
  Platforms
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/android 134708375 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/android" class="">
  
  Android
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/compose 579227762 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/compose" class="">
  
  Compose
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/ios 1446188993 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/ios" class="">
  
  SwiftUI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs 1566390876 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs" class="">
  
  WasmJS
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/kvision 1846351524 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/kvision" class="">
  
  KVision
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules 2115555031 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules" class="">
  
  Modules
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-core 811287498 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-core" class="">
  
  Ballast Core
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-test 73404487 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-test" class="">
  
  Ballast Test
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation" class="">
  
  Ballast Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics 1854873748 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics" class="">
  
  Ballast Analytics
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting 391333725 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting" class="">
  
  Ballast Crash Reporting
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state 219186182 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state" class="">
  
  Ballast Saved State
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync 2040301400 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync" class="">
  
  Ballast Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo 1845527423 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo" class="">
  
  Ballast Undo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules 1675905101 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules" class="">
  
  Ballast Schedules
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository 1784533123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository" class="">
  
  Ballast Repository
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger 2003188951 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger" class="">
  
  Ballast Debugger
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin 488063551 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin" class="">
  
  Ballast Intellij Plugin
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/community 1550899184 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/community" class="">
  
  Community Libraries
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples 1479396661 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples" class="">
  
  Examples
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/counter 510382691 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/counter" class="">
  
  Counter
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper 961178923 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper" class="">
  
  Scorekeeper
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/sync 1667232421 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/sync" class="">
  
  Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/undo 1437454238 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/undo" class="">
  
  Undo/Redo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/bgg-api 353761154 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/bgg-api" class="">
  
  API Call &amp; Cache
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kitchensink 2136793918 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kitchensink" class="">
  
  Kitchen Sink
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/navigation 1670053034 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/navigation" class="">
  
  Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit 1482694266 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit" class="">
  
  KaMPKit
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc 1651727123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc" class="">
  
  KVision TODOMVC
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform 2058228080 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform" class="">
  
  Shared Compose Multiplatform
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-comparison 1324735779 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-comparison" class="">
  
  MVI Library Comparison
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/roadmap 373197129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/roadmap" class="">
  
  Roadmap
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/changelog 1861083998 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/changelog" class="">
  
  Changelog
  </a>
</li>

</ul>
  


      </aside>
    </div>
  </div>
</div>

<script type="text/javascript">
  function copyElem(fromId, toId) {
    var fromElementContent = document.getElementById(fromId);
    var toElementContent = document.getElementById(toId);
    toElementContent.outerHTML = fromElementContent.outerHTML;
  }

  document.addEventListener("DOMContentLoaded", function (event) {
    copyElem('responsive-menu-content', 'mobile-sidebar-menu');
  });
</script>


</section>

  </div>

  <div class="column is-two-thirds-desktop is-three-quarters-widescreen is-four-fifths-fullhd is-paddingless column-main-right">
  

<nav
  class="navbar is-white border-bottom"
  role="navigation"
  aria-label="main navigation"
>
  <div class="container">
    <div class="navbar-brand is-marginless">

      <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarMain">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu is-marginless" id="navbarMain">
      <div class="navbar-start">
      
<div class="navbar-item">
  <form id="search-input" data-orchid-search>
    <div class="field is-marginless" id="search">
      <div class="control has-icons-left input-control">
        <input class="input" type="text" name="query" placeholder="Search Ballast">

        <span class="icon is-small is-left">
          <i class="fas fa-search"></i>
        </span>

        <div id="search-progress" data-orchid-search-progress style="display: none;">
          <div class="loader">Loading...</div>
        </div>
      </div>
    </div>
    <div id="search-results" data-orchid-search-results style="display: none;">
      <div class="carat"></div>
      <b>
        Search Results
        <i class="fa fa-times" aria-hidden="true" onclick="$('[data-orchid-search-results]').hide()"></i>
      </b>
      <ul></ul>
    </div>
  </form>
</div>

      

  
  
    

<a class="navbar-item " href="https://github.com/orchidhq/Orchid">
Orchid
</a>


  

  
  
    
<div class="navbar-item has-dropdown is-hoverable">


<a class="navbar-item " href="">
Copper Leaf
</a>


  <div class="navbar-dropdown">
  
      

<a class="navbar-item " href="https://github.com/copper-leaf/common">
Common
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/clog">
Clog
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/kudzu">
Kudzu
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/trellis">
Trellis
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/thistle">
Thistle
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/ballast">
Ballast
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/kodiak">
Kodiak
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/krow">
Krow
</a>


    
  </div>
</div>

  


      </div>

      <div class="navbar-end">
      

<div class="navbar-item social-item">
  <a class="icon" href="https://github.com/copper-leaf" title="Copper Leaf Home">
    <i class="fas fa-home"></i>
  </a>
</div>

<div class="navbar-item social-item">
  <a class="icon" href="https://github.com/copper-leaf/ballast" title="Github">
    <i class="fab fa-github"></i>
  </a>
</div>

<div class="navbar-item social-item">
  <a class="icon" href="https://twitter.com/OrchidSSG" title="Twitter">
    <i class="fab fa-twitter"></i>
  </a>
</div>


      </div>
    </div>
  </div>
</nav>


    <div class="textured container" style="width: 100%;">
    
    

    
    
      <article style="position: relative; margin-top: 60px; margin-bottom: 60px;" role="main">
      
      
        <div class="box">
        

<div class="columns">
  <div class="column is-three-quarters-desktop">
  
    <!-- start:inject components -->
    
        
            
                
                    
                        <div class="content is-medium-tablet is-large-fullhd">
<h1 id="migrate-from-v2-to-v3"><a href="#migrate-from-v2-to-v3" id="migrate-from-v2-to-v3" class="anchor"></a>Migrate from V2 to V3</h1>
<p>Ballast v3.0.0 is a major release, which some breaking changes in its public API and significant improvements to its
internals. Most of these changes were introduced in a way that is source backward-compatible, but no attempt was made to
maintain strict binary backward-compatibility. Most projects that were compiled with Ballast v2.3 should be able to be
updated to Ballast v3.0 and still compile, though a library that depends on Ballast v2.3 may need to be recompiled
against Ballast v3 to work properly.</p>
<p>The breaking changes are intended to be easily adopted, with deprecations introduced from v2.3 and automatic fixes
available. Features that were already marked as deprecated in v2.3 have been removed.</p>
<p>See below for the complete list of changes, and how to update your project to support these changes.</p>
<h2 id="dependency-artifact-changes"><a href="#dependency-artifact-changes" id="dependency-artifact-changes" class="anchor"></a>Dependency artifact changes:</h2>
<ul>
<li><code>ballast-firebase-analytics</code> and <code>ballast-firebase-crashlytics</code> modules are reimplemented for all platforms as basic
reporting
<ul>
<li><code>ballast-firebase-analytics</code> implementation (without Firebase dependency) is now in <code>ballast-analytics</code>.
<code>ballast-firebase-analytics</code> depends on <code>ballast-analytics</code> and adds <code>FirebaseAnalyticsTracker</code>.
<code>FirebaseAnalyticsInterceptor</code> is now deprecated</li>
<li><code>ballast-firebase-crashlytics</code> implementation (without Firebase dependency) is now in <code>ballast-crash-reporting</code>.
<code>ballast-firebase-crashlytics</code> depends on <code>ballast-crash-reporting</code> and adds <code>FirebaseCrashReporter</code>.
<code>FirebaseCrashlyticsInterceptor</code> is now deprecated</li>
</ul>
</li>
<li><code>ballast-core</code> has been broken out into several smaller artifacts: <code>ballast-api</code>, <code>ballast-logging</code>,
<code>ballast-viewmodel</code>, and <code>ballast-utils</code>. <code>ballast-core</code> depends on all these new artifacts, so no changes are necessary
unless you wish to pick which of these core modules you need.</li>
</ul>
<h2 id="breaking-changes"><a href="#breaking-changes" id="breaking-changes" class="anchor"></a>Breaking Changes</h2>
<ul>
<li>Changes to <code>BallastNotification</code>
<ul>
<li><code>BallastNotification</code> previously had a hard reference to the <code>BallastViewModel</code> which emitted the notification, which
led to potential issues with memory leaks or incorrect usage within an Interceptor. The intended use-case for this
property was to give access to the name of the VM for debugging purposes, so <code>BallastNotification.vm</code> has been
replaced with <code>BallastNotification.viewModelType</code> and <code>BallastNotification.viewModelName</code></li>
</ul>
</li>
<li><code>name</code> and <code>type</code> properties are no longer exposed through the <code>BallastViewModel</code> interface. These were intended to be
used by Interceptors for debugging, but because of the changes to <code>BallastNotification</code>, are no longer necessary as
part of the <code>BallastViewModel</code> public API.</li>
<li>A new subclass of <code>Queued</code> has been added: <code>Queued.CloseGracefully</code>.</li>
<li><code>fetchWithCache()</code> can now be used from any ViewModel, rather than being restricted to <code>BallastRepository</code>. This was
done by adding a new <code>Events</code> type parameter, so it now takes 3 type paramters rather than 2</li>
<li><code>Cached</code> can now be used with nullable values, by removing the bounds of its type parameter</li>
<li>Drops support for deprecated KMPP targets: JS Legacy, iosArm32</li>
</ul>
<h2 id="new-apis"><a href="#new-apis" id="new-apis" class="anchor"></a>New APIs</h2>
<ul>
<li><code>InputHandlerScope.cancelSideJob()</code> allows you to cancel a running sideJob, rather than needing to create
an empty one to cancel it.</li>
<li><code>SideJobScope.key</code> gives you the <code>key</code> used to start the sideJob</li>
<li><code>SideJobScope.getInterceptor()</code> allow you to find an Interceptor that is registered within the ViewModel, for using
its public members (such as <code>BallastUndoInterceptor.undo()</code> or <code>KillSwitch.requestGracefulShutdown()</code>)</li>
<li><code>KillSwitch</code> interceptor, to request graceful shutdown</li>
<li><code>RestoreStateScope.postInput()</code> and <code>RestoreStateScope.postEvent()</code> added as a replacement of
<code>SavedStateAdapter.onRestoreComplete</code>, allowing more flexibility when restoring the state of a ViewModel.</li>
<li><code>AndroidViewModel</code> and <code>AndroidBallastRepository</code> now accept an optional <code>coroutineScope</code> which will be passed into
the <code>ViewModel</code> constructor. If this coroutineScope implements <code>Closeable</code>, it will be cancelled when the ViewModel is
cleared. If it does not implement <code>Closeable</code>, it will be wrapped in a <code>Closeable { }</code> block to cancel it instead.</li>
<li>New platform-specific loggers are available:
<ul>
<li><code>NSLogLogger</code> writes to <code>NSLog</code> on iOS. Credit goes to <a href="https://github.com/touchlab/Kermit">Kermit</a> for the
implementation, which was copied for this logger.</li>
<li><code>OSLogLogger</code> writes to <code>OSLog</code> on iOS. Credit goes to <a href="https://github.com/touchlab/Kermit">Kermit</a> for the
implementation, which was copied for this logger.</li>
</ul>
</li>
<li>You can now intelligently serialize the data sent to the Debugger UI, for example by serializing it to JSON.
<code>BallastDebuggerInterceptor</code> now has 3 optional properties for <code>serializeInput</code>, <code>serializeEvent</code>, and
<code>serializeState</code> which you could use to convert those values into JSON or any other serialized format for improved
display in the Intellij Plugin's Debugger UI. By default, values are serialized by calling their <code>.toString()</code>, which
was the previous the default behavior.</li>
</ul>
<h2 id="deprecations"><a href="#deprecations" id="deprecations" class="anchor"></a>Deprecations</h2>
<p>Several features have been deprecated with the release of v3.0.0, which will be removed in Ballast v4. Most of these
changes are simple name changes, or related to the overhaul of ViewModel internals.</p>
<h3 id="firebaseanalyticsinterceptor"><a href="#firebaseanalyticsinterceptor" id="firebaseanalyticsinterceptor" class="anchor"></a>FirebaseAnalyticsInterceptor</h3>
<p>FirebaseAnalyticsInterceptor is deprecated. <code>AnalyticsInterceptor</code> is the intended replacement, which is now
available in all supported targets. In addition to supporting trackers other than Firebase, it also allows you more
flexibility in selecting which Inputs to track, so that you can now track Inputs without needing the
<code>@FirebaseAnalyticsTrackInput</code> annotation.</p>
<pre><code class="language-kt">// Old usage
BallastViewModelConfiguration.Builder()
    .apply {
        this += FirebaseAnalyticsInterceptor(Firebase.analytics) // FirebaseAnalyticsInterceptor class
    }
    .build()

// New usage
BallastViewModelConfiguration.Builder()
    .apply {
        // customized interceptor
        this += AnalyticsInterceptor(
            tracker = FirebaseAnalyticsTracker(Firebase.analytics),
            shouldTrackInput = { it.isAnnotatedWith&lt;FirebaseAnalyticsTrackInput&gt;() },
        )
        // helper function for setting up tracking with Firebase
        this += FirebaseAnalyticsInterceptor() // FirebaseAnalyticsInterceptor factory function, which returns AnalyticsInterceptor
    }
    .build()
</code></pre>
<h3 id="firebasecrashlyticsinterceptor"><a href="#firebasecrashlyticsinterceptor" id="firebasecrashlyticsinterceptor" class="anchor"></a>FirebaseCrashlyticsInterceptor</h3>
<p>FirebaseCrashlyticsInterceptor is deprecated. <code>CrashReportingInterceptor</code> is the intended replacement, which is now
available in all supported targets. In addition to supporting crash reporters other than Firebase, it also allows you
more flexibility in selecting which Inputs to ignore, so that you can now ignore Inputs without needing the
<code>@FirebaseCrashlyticsIgnore</code> annotation.</p>
<pre><code class="language-kt">// Old usage
BallastViewModelConfiguration.Builder()
    .apply {
        this += FirebaseCrashlyticsInterceptor(Firebase.crashlytics) // FirebaseCrashlyticsInterceptor class
    }
    .build()

// New usage
BallastViewModelConfiguration.Builder()
    .apply {
        // customized interceptor
        this += CrashReportingInterceptor(
            tracker = FirebaseCrashReporter(Firebase.crashlytics),
            shouldTrackInput = { !it.isAnnotatedWith&lt;FirebaseCrashlyticsIgnore&gt;() },
        )
        // helper function for setting up crash reporting with Firebase
        this += FirebaseCrashlyticsInterceptor() // FirebaseCrashlyticsInterceptor factory function, which returns CrashReportingInterceptor
    }
    .build()
</code></pre>
<h3 id="savedstateadapter"><a href="#savedstateadapter" id="savedstateadapter" class="anchor"></a>SavedStateAdapter</h3>
<p><code>SavedStateAdapter.onRestoreComplete()</code> was previously used to send an Input after a ViewModel's state had been
restored. This function is now deprecated, and new methods added to <code>RestoreStateScope</code> (the receiver of
<code>SavedStateAdapter.restore()</code>) which accomplish the same functionality.</p>
<pre><code class="language-kt">// Old usage
class ExampleSavedStateAdapter(
    private val database: ExampleDatabase,
) : SavedStateAdapter&lt;
        ExampleContract.Inputs,
        ExampleContract.Events,
        ExampleContract.State&gt; {

    override suspend fun SaveStateScope&lt;
            ExampleContract.Inputs,
            ExampleContract.Events,
            ExampleContract.State&gt;.save() {

        saveDiff({ values }) { values -&gt;
            database.saveValues(values)
        }
    }

    override suspend fun RestoreStateScope&lt;
            ExampleContract.Inputs,
            ExampleContract.Events,
            ExampleContract.State&gt;.restore(): ExampleContract.State {
        return ExampleContract.State(
            values = database.selectValues(values)
        )
    }

    override suspend fun onRestoreComplete(restoredState: State): Inputs? {
        return ExampleContract.Inputs.Initialize
    }
}

// New usage
class ExampleSavedStateAdapter(
    private val database: ExampleDatabase,
) : SavedStateAdapter&lt;
        ExampleContract.Inputs,
        ExampleContract.Events,
        ExampleContract.State&gt; {

    override suspend fun SaveStateScope&lt;
            ExampleContract.Inputs,
            ExampleContract.Events,
            ExampleContract.State&gt;.save() {

        saveDiff({ values }) { values -&gt;
            database.saveValues(values)
        }
    }

    override suspend fun RestoreStateScope&lt;
            ExampleContract.Inputs,
            ExampleContract.Events,
            ExampleContract.State&gt;.restore(): ExampleContract.State {
        val restoredState = ExampleContract.State(
            values = database.selectValues(values)
        )
        
        postInput(ExampleContract.Inputs.Initialize)
        
        return restoredState
    }
}
</code></pre>
<h3 id="sidejobscope"><a href="#sidejobscope" id="sidejobscope" class="anchor"></a>SideJobScope</h3>
<p><code>SideJobScope.currentStateWhenStarted</code> is now deprecated, with no direct replacement. This property could lead to race
conditions if the state was changed between the time the sideJob was dispatched and when it was actually started, which
reduces the ability to know exactly what's running within the sideJob block.</p>
<p>Instead, capture a snapshot of the state yourself from the <code>InputHandlerScope</code> and pass that object into the sideJob.</p>
<pre><code class="language-kt">// Old usage
sideJob(&quot;key&quot;) {
    doSomethingWithState(currentStateWhenStarted)
}

// New usage
val currentState = getCurrentState()
sideJob(&quot;key&quot;) {
    doSomethingWithState(currentState)
}
</code></pre>
<h3 id="ballastinterceptor"><a href="#ballastinterceptor" id="ballastinterceptor" class="anchor"></a>BallastInterceptor</h3>
<p><code>BallastInterceptor</code> has had 2 callbacks for its usage: <code>BallastInterceptor.onNotify()</code> to process Notifications one at
a time for simple reactive usage, and <code>BallastInterceptor.start()</code> for full access to the <code>Flow&lt;BallastNotification&gt;</code>
for more advanced usage. <code>BallastInterceptor.onNotify()</code> has been deprecated, so there should only be the single
entry-point for making new Interceptors.</p>
<pre><code class="language-kt">// Old Usage
class CustomInterceptor&lt;Inputs : Any, Events : Any, State : Any&gt; : BallastInterceptor&lt;Inputs, Events, State&gt; {
    override suspend fun onNotify(logger: BallastLogger, notification: BallastNotification&lt;Inputs, Events, State&gt;) {
        // do something
    }
}

// New Usage
class CustomInterceptor&lt;Inputs : Any, Events : Any, State : Any&gt; : BallastInterceptor&lt;Inputs, Events, State&gt; {
    override fun BallastInterceptorScope&lt;Inputs, Events, State&gt;.start(
        notifications: Flow&lt;BallastNotification&lt;Inputs, Events, State&gt;&gt;,
    ) {
        launch(start = CoroutineStart.UNDISPATCHED) {
            notifications.awaitViewModelStart()
            notifications
                .onEach { 
                    // do something
                }
                .collect()
        }
    }
}
</code></pre>
<h3 id="jsconsoleballastlogger"><a href="#jsconsoleballastlogger" id="jsconsoleballastlogger" class="anchor"></a>JsConsoleBallastLogger</h3>
<p><code>JsConsoleBallastLogger</code> is deprecated, to be replaced with <code>JsConsoleLogger</code>. This is just a name change, functionality
is identical.</p>
<h3 id="androidballastlogger"><a href="#androidballastlogger" id="androidballastlogger" class="anchor"></a>AndroidBallastLogger</h3>
<p><code>AndroidBallastLogger</code> is deprecated, to be replaced with <code>AndroidLogger</code>. This is just a name change, functionality
is identical.</p>
<h3 id="defaultundocontroller"><a href="#defaultundocontroller" id="defaultundocontroller" class="anchor"></a>DefaultUndoController</h3>
<p><code>DefaultUndoController</code> is deprecated, to be replaced with <code>StateBasedUndoController</code>. This is in preparation to
maintain name-parity with a future feature to add an <code>InputBasedUndoController</code>. The <code>StateBasedUndoController</code> is also
itself built as a <code>BallastViewModel</code>, so you can add Interceptors to this UndoController if you need more advanced
logging or other features to better manage your undo/redo functionality.</p>

</div>

                    
                
            
        
    
    <!-- end:inject components -->


  </div>
  
    <div class="column is-one-quarter is-hidden-touch">
      <div class="sticky-menu" style="position: sticky; top: 30px;">
  
  
    
<p class="menu-label">In This Page</p>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#dependency-artifact-changes" class="">
  
  Dependency artifact changes:
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#breaking-changes" class="">
  
  Breaking Changes
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#new-apis" class="">
  
  New APIs
  </a>
</li>

</ul>
  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#deprecations" class="">
  
  Deprecations
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#firebaseanalyticsinterceptor" class="">
  
  FirebaseAnalyticsInterceptor
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#firebasecrashlyticsinterceptor" class="">
  
  FirebaseCrashlyticsInterceptor
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#savedstateadapter" class="">
  
  SavedStateAdapter
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#sidejobscope" class="">
  
  SideJobScope
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#ballastinterceptor" class="">
  
  BallastInterceptor
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#jsconsoleballastlogger" class="">
  
  JsConsoleBallastLogger
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#androidballastlogger" class="">
  
  AndroidBallastLogger
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/usage/migration/v3 1963342800 -->
  <!-- menuItem.page=  -->
  <a href="#defaultundocontroller" class="">
  
  DefaultUndoController
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

</div>
    </div>
  
</div>

        </div>
      
      
      </article>
    
      <div class="grow"></div>
      <div class="page-footer">
      
        <nav class="pagination is-rounded footer-pagination" role="navigation" aria-label="pagination">

  <a class="pagination-previous" href="https://copper-leaf.github.io/ballast/wiki/usage/migration">
    <span class="icon"><i class="fas fa-chevron-left"></i></span>
    Migration Guide
  </a>



  <a class="pagination-next" href="https://copper-leaf.github.io/ballast/wiki/usage/migration/v4">
    v3 to v4
    <span class="icon"><i class="fas fa-chevron-right"></i></span>
  </a>

</nav>

<footer class="footer border-top">
  <div class="content is-small">
  <p>
  Site proudly built with <a href="https://orchid.run/">Orchid</a>.<br>
</p>

  </div>
</footer>

      
      </div>
    </div>
  </div>
</div>






    <!-- start:inject meta-components [bodyEnd] -->
    
    <!-- end:inject meta-components [bodyEnd] -->



    <!-- start:inject meta-components [bodyEnd] -->
    

        
            
        

        
    
    <!-- end:inject meta-components [bodyEnd] -->




<!-- start:inject scripts -->
<script defer data-search-pseudo-elements="true" src="https://copper-leaf.github.io/ballast/Copper/6f592938/releases/v5.4.0/js/all.js"></script>
<script  src="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/js/bulma.js"></script>
<script  src="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/js/bulma-accordion.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/js/bulma-tabs.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/lunr/lunr.js"></script>
<script  src="https://copper-leaf.github.io/ballast/assets/js/orchidSearch.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/components/prism-kotlin.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/components/prism-java.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/components/prism-groovy.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/mermaid/8.13.9/mermaid.min.js"></script>
<script >
;

document.addEventListener('DOMContentLoaded', function() {
    mermaid.init({}, "code.language-mermaid");
});
</script>
<script  src="https://copper-leaf.github.io/ballast/assets/scripts/mp-widget.js"></script>
<script >

if(document.getElementById("intellij-plugin-button") != null) {
    MarketplaceWidget.setupMarketplaceWidget('install', 18702, "#intellij-plugin-button");
}
if(document.getElementById("intellij-plugin-card") != null) {
    MarketplaceWidget.setupMarketplaceWidget('card', 18702, "#intellij-plugin-card");
}
</script>
<!-- end:inject scripts -->


</body>
</html>
