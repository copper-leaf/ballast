

<!DOCTYPE html>
<html class="">
<head>






<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.21.1"/>
<link rel="icon" href="https://copper-leaf.github.io/ballast/favicon.ico">


<meta name="robots" content="index, follow">



<title>Ballast Navigation</title>


<meta name="description" content="Opinionated Application State Management framework for Kotlin Multiplatform">



<link rel="prev" href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-test">


<link rel="next" href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics">


<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/bulma.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/extraCss.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/bulma-tooltip.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/css/bulma-accordion.min.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/assets/css/orchidSearch.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/PrismJS/prism-themes/master/themes/prism-duotone-light.css"  />
<link rel="stylesheet" type="text/css" href="https://copper-leaf.github.io/ballast/assets/css/mermaid_bulma.css"  />
<!-- end:inject styles -->



<script>
    window.site = {"orchidVersion":"0.21.1","baseUrl":"https://copper-leaf.github.io/ballast","environment":"prod","version":"4.2.1"};
</script>


    <!-- start:inject meta-components [head] -->
    
    <!-- end:inject meta-components [head] -->



    <!-- start:inject meta-components [head] -->
    

        
            
        

        
            
        
            
        
            
        
    
    <!-- end:inject meta-components [head] -->







</head>
<body class="">





    <!-- start:inject meta-components [bodyStart] -->
    
    <!-- end:inject meta-components [bodyStart] -->



    <!-- start:inject meta-components [bodyStart] -->
    

        
            
        

        
    
    <!-- end:inject meta-components [bodyStart] -->





<div class="columns is-marginless is-desktop">

  <div class="column is-one-third-desktop is-one-quarter-widescreen is-one-fifth-fullhd is-paddingless column-main-left is-hidden-mobile is-hidden-touch">
  


    


<section class="hero is-primary is-bold is-fullheight">


<!-- Hero header: will stick at the top -->
<div class="hero-head" style="padding: 0 1.5rem">
  <p class="title is-1 has-text-centered" style="margin-top: 3.5rem; margin-bottom: 2.5rem;">Ballast</p>
  <p class="subtitle is-4 has-text-centered">Opinionated Application State Management framework for Kotlin Multiplatform</p>

  <div id="intellij-plugin-card"></div>

  <div class="columns is-mobile has-text-centered">
  


  


  </div>
</div>




<!-- Hero content: will be in the middle -->
<div class="hero-body">
  <div class="container sidebar-menu">
    <details class="is-hidden-desktop">
      <summary>
        Menu
      </summary>
      <div id="mobile-sidebar-menu"></div>
    </details>
    <div class="is-hidden-touch">
      <aside class="menu" id="responsive-menu-content">
      
  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast 1389865849 -->
  <a href="https://copper-leaf.github.io/ballast" class="">
  
  Home
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-overview 2017959723 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-overview" class="">
  
  Feature Overview
  </a>
</li>

</ul>
  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage 659906939 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage" class="">
  
  Usage Guide
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/mental-model 1703254852 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/mental-model" class="">
  
  Thinking in Ballast MVI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/workflow 228548558 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/workflow" class="">
  
  Workflow
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/architecture 1231370129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/architecture" class="">
  
  Project Architecture
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/migration 1169672575 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/migration" class="">
  
  Migration Guide
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms 1314688755 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms" class="">
  
  Platforms
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/android 134708375 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/android" class="">
  
  Android
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/compose 579227762 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/compose" class="">
  
  Compose
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/ios 1446188993 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/ios" class="">
  
  SwiftUI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs 1566390876 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs" class="">
  
  WasmJS
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/kvision 1846351524 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/kvision" class="">
  
  KVision
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules 2115555031 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules" class="">
  
  Modules
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-core 811287498 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-core" class="">
  
  Ballast Core
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-test 73404487 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-test" class="">
  
  Ballast Test
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation" class="is-active">
  
  Ballast Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics 1854873748 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics" class="">
  
  Ballast Analytics
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting 391333725 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting" class="">
  
  Ballast Crash Reporting
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state 219186182 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state" class="">
  
  Ballast Saved State
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync 2040301400 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync" class="">
  
  Ballast Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo 1845527423 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo" class="">
  
  Ballast Undo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules 1675905101 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules" class="">
  
  Ballast Schedules
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository 1784533123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository" class="">
  
  Ballast Repository
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger 2003188951 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger" class="">
  
  Ballast Debugger
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin 488063551 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin" class="">
  
  Ballast Intellij Plugin
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/community 1550899184 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/community" class="">
  
  Community Libraries
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples 1479396661 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples" class="">
  
  Examples
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/counter 510382691 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/counter" class="">
  
  Counter
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper 961178923 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper" class="">
  
  Scorekeeper
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/sync 1667232421 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/sync" class="">
  
  Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/undo 1437454238 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/undo" class="">
  
  Undo/Redo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/bgg-api 353761154 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/bgg-api" class="">
  
  API Call &amp; Cache
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kitchensink 2136793918 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kitchensink" class="">
  
  Kitchen Sink
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/navigation 1670053034 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/navigation" class="">
  
  Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit 1482694266 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit" class="">
  
  KaMPKit
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc 1651727123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc" class="">
  
  KVision TODOMVC
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform 2058228080 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform" class="">
  
  Shared Compose Multiplatform
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-comparison 1324735779 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-comparison" class="">
  
  MVI Library Comparison
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/roadmap 373197129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/roadmap" class="">
  
  Roadmap
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/changelog 1861083998 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/changelog" class="">
  
  Changelog
  </a>
</li>

</ul>
  


      </aside>
    </div>
  </div>
</div>

<script type="text/javascript">
  function copyElem(fromId, toId) {
    var fromElementContent = document.getElementById(fromId);
    var toElementContent = document.getElementById(toId);
    toElementContent.outerHTML = fromElementContent.outerHTML;
  }

  document.addEventListener("DOMContentLoaded", function (event) {
    copyElem('responsive-menu-content', 'mobile-sidebar-menu');
  });
</script>


</section>

  </div>
  <div class="column is-one-third-desktop is-one-quarter-widescreen is-one-fifth-fullhd is-paddingless column-main-left is-hidden-desktop">
  


    


<section class="hero is-primary is-bold ">


<!-- Hero header: will stick at the top -->
<div class="hero-head" style="padding: 0 1.5rem">
  <p class="title is-1 has-text-centered" style="margin-top: 3.5rem; margin-bottom: 2.5rem;">Ballast</p>
  <p class="subtitle is-4 has-text-centered">Opinionated Application State Management framework for Kotlin Multiplatform</p>

  <div id="intellij-plugin-card"></div>

  <div class="columns is-mobile has-text-centered">
  


  


  </div>
</div>




<!-- Hero content: will be in the middle -->
<div class="hero-body">
  <div class="container sidebar-menu">
    <details class="is-hidden-desktop">
      <summary>
        Menu
      </summary>
      <div id="mobile-sidebar-menu"></div>
    </details>
    <div class="is-hidden-touch">
      <aside class="menu" id="responsive-menu-content">
      
  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast 1389865849 -->
  <a href="https://copper-leaf.github.io/ballast" class="">
  
  Home
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-overview 2017959723 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-overview" class="">
  
  Feature Overview
  </a>
</li>

</ul>
  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage 659906939 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage" class="">
  
  Usage Guide
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/mental-model 1703254852 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/mental-model" class="">
  
  Thinking in Ballast MVI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/workflow 228548558 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/workflow" class="">
  
  Workflow
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/architecture 1231370129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/architecture" class="">
  
  Project Architecture
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/usage/migration 1169672575 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/usage/migration" class="">
  
  Migration Guide
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms 1314688755 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms" class="">
  
  Platforms
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/android 134708375 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/android" class="">
  
  Android
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/compose 579227762 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/compose" class="">
  
  Compose
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/ios 1446188993 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/ios" class="">
  
  SwiftUI
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs 1566390876 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/wasmjs" class="">
  
  WasmJS
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/platforms/kvision 1846351524 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/platforms/kvision" class="">
  
  KVision
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules 2115555031 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules" class="">
  
  Modules
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-core 811287498 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-core" class="">
  
  Ballast Core
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-test 73404487 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-test" class="">
  
  Ballast Test
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation" class="is-active">
  
  Ballast Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics 1854873748 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics" class="">
  
  Ballast Analytics
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting 391333725 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-crash-reporting" class="">
  
  Ballast Crash Reporting
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state 219186182 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-saved-state" class="">
  
  Ballast Saved State
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync 2040301400 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync" class="">
  
  Ballast Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo 1845527423 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo" class="">
  
  Ballast Undo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules 1675905101 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-schedules" class="">
  
  Ballast Schedules
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository 1784533123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-repository" class="">
  
  Ballast Repository
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger 2003188951 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger" class="">
  
  Ballast Debugger
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin 488063551 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-intellij-plugin" class="">
  
  Ballast Intellij Plugin
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/modules/community 1550899184 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/modules/community" class="">
  
  Community Libraries
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples 1479396661 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples" class="">
  
  Examples
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/counter 510382691 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/counter" class="">
  
  Counter
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper 961178923 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/scorekeeper" class="">
  
  Scorekeeper
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/sync 1667232421 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/sync" class="">
  
  Sync
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/undo 1437454238 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/undo" class="">
  
  Undo/Redo
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/bgg-api 353761154 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/bgg-api" class="">
  
  API Call &amp; Cache
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kitchensink 2136793918 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kitchensink" class="">
  
  Kitchen Sink
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/navigation 1670053034 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/navigation" class="">
  
  Navigation
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit 1482694266 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kamp-kit" class="">
  
  KaMPKit
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc 1651727123 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/kvision-todomvc" class="">
  
  KVision TODOMVC
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform 2058228080 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/examples/shared-compose-multiplatform" class="">
  
  Shared Compose Multiplatform
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/feature-comparison 1324735779 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/feature-comparison" class="">
  
  MVI Library Comparison
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/roadmap 373197129 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/roadmap" class="">
  
  Roadmap
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=https://copper-leaf.github.io/ballast/wiki/changelog 1861083998 -->
  <a href="https://copper-leaf.github.io/ballast/wiki/changelog" class="">
  
  Changelog
  </a>
</li>

</ul>
  


      </aside>
    </div>
  </div>
</div>

<script type="text/javascript">
  function copyElem(fromId, toId) {
    var fromElementContent = document.getElementById(fromId);
    var toElementContent = document.getElementById(toId);
    toElementContent.outerHTML = fromElementContent.outerHTML;
  }

  document.addEventListener("DOMContentLoaded", function (event) {
    copyElem('responsive-menu-content', 'mobile-sidebar-menu');
  });
</script>


</section>

  </div>

  <div class="column is-two-thirds-desktop is-three-quarters-widescreen is-four-fifths-fullhd is-paddingless column-main-right">
  

<nav
  class="navbar is-white border-bottom"
  role="navigation"
  aria-label="main navigation"
>
  <div class="container">
    <div class="navbar-brand is-marginless">

      <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarMain">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu is-marginless" id="navbarMain">
      <div class="navbar-start">
      
<div class="navbar-item">
  <form id="search-input" data-orchid-search>
    <div class="field is-marginless" id="search">
      <div class="control has-icons-left input-control">
        <input class="input" type="text" name="query" placeholder="Search Ballast">

        <span class="icon is-small is-left">
          <i class="fas fa-search"></i>
        </span>

        <div id="search-progress" data-orchid-search-progress style="display: none;">
          <div class="loader">Loading...</div>
        </div>
      </div>
    </div>
    <div id="search-results" data-orchid-search-results style="display: none;">
      <div class="carat"></div>
      <b>
        Search Results
        <i class="fa fa-times" aria-hidden="true" onclick="$('[data-orchid-search-results]').hide()"></i>
      </b>
      <ul></ul>
    </div>
  </form>
</div>

      

  
  
    

<a class="navbar-item " href="https://github.com/orchidhq/Orchid">
Orchid
</a>


  

  
  
    
<div class="navbar-item has-dropdown is-hoverable">


<a class="navbar-item " href="">
Copper Leaf
</a>


  <div class="navbar-dropdown">
  
      

<a class="navbar-item " href="https://github.com/copper-leaf/common">
Common
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/clog">
Clog
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/kudzu">
Kudzu
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/trellis">
Trellis
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/thistle">
Thistle
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/ballast">
Ballast
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/kodiak">
Kodiak
</a>


    
      

<a class="navbar-item " href="https://github.com/copper-leaf/krow">
Krow
</a>


    
  </div>
</div>

  


      </div>

      <div class="navbar-end">
      

<div class="navbar-item social-item">
  <a class="icon" href="https://github.com/copper-leaf" title="Copper Leaf Home">
    <i class="fas fa-home"></i>
  </a>
</div>

<div class="navbar-item social-item">
  <a class="icon" href="https://github.com/copper-leaf/ballast" title="Github">
    <i class="fab fa-github"></i>
  </a>
</div>

<div class="navbar-item social-item">
  <a class="icon" href="https://twitter.com/OrchidSSG" title="Twitter">
    <i class="fab fa-twitter"></i>
  </a>
</div>


      </div>
    </div>
  </div>
</nav>


    <div class="textured container" style="width: 100%;">
    
    

    
    
      <article style="position: relative; margin-top: 60px; margin-bottom: 60px;" role="main">
      
      
        <div class="box">
        

<div class="columns">
  <div class="column is-three-quarters-desktop">
  
    <!-- start:inject components -->
    
        
            
                
                    
                        <div class="content is-medium-tablet is-large-fullhd">
<h1 id="ballast-navigation"><a href="#ballast-navigation" id="ballast-navigation" class="anchor"></a>Ballast Navigation</h1>
<h2 id="overview"><a href="#overview" id="overview" class="anchor"></a>Overview</h2>
<p>Ballast Navigation is a Kotlin multiplatform URL-based routing library, built on top of the rock-solid Ballast state
management library. It is framework-agnostic and can be easily integrated into Compose, Android, or any other
application where you need to handle routing or navigation. It works purely at runtime with no reflection, no code
generation, and no magic. Just simple, predictable state management, like a browser's address bar anywhere you need it.</p>
<p>Ballast Navigation essentially just provides a way to manage a backstack of URLs, and match those URLs to registered
routes using a pattern syntax similar to Ktor's router. It manages backstack updates safely and predictably, and since
it is built with Ballast at the core, you can extend your routing functionality with features like:</p>
<ul>
<li>Time-travel debugging and inspecting the backstack with the <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-debugger">Ballast Debugger</a></li>
<li>Adding browser-like forward/backward navigation buttons with <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-undo">Ballast Undo</a></li>
<li>Synchronizing router state across components or devices with <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-sync">Ballast Sync</a></li>
<li>Tracking page views with <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics">Ballast Analytics</a></li>
</ul>
<h2 id="usage"><a href="#usage" id="usage" class="anchor"></a>Usage</h2>
<p>Ballast Navigation can be used as your application's main router, or as a sub-router for tabbed views or similar UI
patterns, and there's no real difference between the two. This usage guide will walk you through the basics needed to
start handling navigation with Ballast, which can be applied to any navigational pattern you need. It's helpful to have
an understanding of the Ballast MVI model first, which you can find in the main <a href="https://copper-leaf.github.io/ballast/wiki/usage">Ballast Usage Guide</a>, but this is
not strictly necessary.</p>
<p>First, let's define some terms, which will make the rest of the documentation easier to understand:</p>
<ul>
<li><strong>Destination</strong>: A URL that has been sent to the router and lives in the Backstack. A Destination is either matched to
a route, or set as a &quot;mismatch&quot; (like a 404 page in a website)</li>
<li><strong>Route</strong>: Destination URLs are matched to Routes, which may include dynamic path or query parameters extracted
from the destination URL.</li>
<li><strong>Routing Table</strong>: A container which holds registered Routes, and matches destination URLs to a registered route.</li>
<li><strong>Backstack</strong>: A simple list of Destinations, where the last entry in the list is considered the
&quot;current destination&quot;. You move deeper into the application by pushing new destinations onto the end of the stack, and
go backward by popping the last destination off the stack. The state of the backstack can only be updated by sending
an &quot;Input&quot; to the Router, which requests a particular change (or set of changes) be performed which modify the stack.</li>
<li><strong>Router</strong>: A Ballast ViewModel that manages the backstack and protects it from unexpected changes. Changes to the
backstack will be set as the ViewModel's State, which can be observed directly from a declarative UI, and will also be
sent as discrete Events for handling navigation in a more imperative manner (such as controlling Android
FragmentTransactions).</li>
</ul>
<h3 id="step-1-define-your-routes"><a href="#step-1-define-your-routes" id="step-1-define-your-routes" class="anchor"></a>Step 1: Define your Routes</h3>
<p>Start by defining your routes. This is done with an enum class so that you can statically refer to all routes anywhere
in your application, since enums are effectively constant values. Enums also allow you to use an exhaustive <code>when</code> to
display UI for a given route, and also automatically registers all routes with the Routing Table without additional
boilerplate, code generation, or reflection magic. This ensures that any route you create will always be handled
properly, both in the Routing Table and in your UI.</p>
<p>The enum class that you use to define your Routes must implement the <code>Route</code> interface, as shown in this snippet:</p>
<pre><code class="language-kotlin">enum class AppScreen(
    routeFormat: String,
    override val annotations: Set&lt;RouteAnnotation&gt; = emptySet(),
) : Route {
    Home(&quot;/app/home&quot;),
    PostList(&quot;/app/posts?sort={?}&quot;),
    PostDetails(&quot;/app/posts/{postId}&quot;),
    ;

    override val matcher: RouteMatcher = RouteMatcher.create(routeFormat)
}
</code></pre>
<p>The syntax for matching routes is documented in more detail <a href="#route-matching">below</a>.</p>
<h3 id="step-2-create-the-router-object"><a href="#step-2-create-the-router-object" id="step-2-create-the-router-object" class="anchor"></a>Step 2: Create the Router object</h3>
<p>The Router is just a Ballast ViewModel, which can be created using any implementation class you need. You must call
<code>.withRouter()</code> on the <code>BallastViewModelConfiguration.Builder</code> and pass in your RoutingTable and the initial route,
which is created using <code>RoutingTable.fromEnum()</code>.</p>
<p>The Router should typically be effectively global and managed at the root of your application, since it controls the
state of all screens in your application. In other words, it lives <em>above</em> the UI, not within it. Alternatively, you
can create routers for locally-scoped portions of the application like tabbed views, which should be managed at that
point in the application instead of globally.</p>
<p>Here's an example of creating a ViewModel class to be your Router. The classes typically needed for a Ballast ViewModel
are all further parameterized with the type of Route, so typealiases are available which reduce the boilerplate you need
to write. <code>BasicViewModel&lt;&gt;</code> becomes <code>BasicRouter&lt;&gt;</code>, <code>EventHandler&lt;&gt;</code> becomes <code>RouterEventHandler&lt;&gt;</code>, etc.</p>
<pre><code class="language-kotlin">class RouterViewModel(
    viewModelCoroutineScope: CoroutineScope
) : BasicRouter&lt;AppScreens&gt;(
    config = BallastViewModelConfiguration.Builder()
        .withRouter(RoutingTable.fromEnum(AppScreens.values()), AppScreens.Home)
        .build(),
    eventHandler = eventHandler { },
    coroutineScope = viewModelCoroutineScope,
)
</code></pre>
<article class="message is-info">

  <div class="message-body">
  <p><strong>Info</strong></p>
<p>When using Ballast Navigation in the browser, you can use <code>.withBrowserHashRouter()</code> or <code>.withBrowserHistoryRouter()</code>
instead of <code>.withRouter()</code> to synchronize the Router state with the browser's address bar. See
<a href="#how-do-i-sync-destinations-with-the-browser-address-bar">FAQs below</a> for more info on this feature.</p>
  </div>
</article>
<p>Refer to the <a href="https://copper-leaf.github.io/ballast/wiki/usage#connect-to-the-platform-ui">Usage Guide</a>
for full documentation on creating the ViewModel for your platform's needs.</p>
<h3 id="step-3-handle-route-changes"><a href="#step-3-handle-route-changes" id="step-3-handle-route-changes" class="anchor"></a>Step 3: Handle route changes</h3>
<p>Now that the Router is set up and ready to accept navigation requests, it's time to decide how you'll handle route
changes. There are 2 basic ways to handle route changes, as explained below:</p>
<h4 id="declaratively-observing-backstack-state"><a href="#declaratively-observing-backstack-state" id="declaratively-observing-backstack-state" class="anchor"></a>Declaratively observing Backstack State</h4>
<p>The backstack is managed as a StateFlow within a Ballast ViewModel, and you can observe that StateFlow to apply its
changes to your UI. This is typically how one would handle navigation in Compose or other Declarative UI toolkits.</p>
<p>When collecting the Router State, you would typically only look at the last entry of the backstack to determine the
&quot;current route&quot; that should be displayed in the UI. <code>routerState.renderCurrentDestination</code> is the easiest way to display
the current Route or a &quot;Not Found&quot; screen, but there are several other extension functions for more specific use-cases
that you may find useful. And of course, the backstack is just a list of states, so you are free to consider entries
further back in the stack, such as for showing a stack of floating windows.</p>
<pre><code class="language-kotlin">@Composable
fun MainContent() {
    val applicationScope = rememberCoroutineScope()
    val router: Router&lt;AppScreen&gt; = remember(applicationScope) { RouterViewModel(applicationScope) }

    val routerState: Backstack&lt;AppScreen&gt; by router.observeStates().collectAsState()

    routerState.renderCurrentDestination(
        route = { appScreen: AppScreen -&gt;
            when(appScreen) {
                // ...
            }
        },
        notFound = { },
    )
}
</code></pre>
<h4 id="imperatively-reacting-to-backstack-changes"><a href="#imperatively-reacting-to-backstack-changes" id="imperatively-reacting-to-backstack-changes" class="anchor"></a>Imperatively reacting to Backstack changes</h4>
<p>Other (usually older) UI toolkits typically worked with a more imperative mechanism for handling navigation between
screens. This would be the traditional Activity- or Fragment-based navigation on Android for example. Ballast Navigation
is able to work with this style of navigation by handling changes in a Ballast Event Handler to ensure they're only
handled once for each screen.</p>
<p>Here's an example of how this might look for a single-Activity Fragment-based navigation in Android. You'll notice that
it uses all of the same extension functions as the Declarative Compose model for finding the current screen in the
backstack, accessing route parameters, etc.</p>
<pre><code class="language-kotlin">class BallastExamplesRouterEventHandler(
    private val activity: MainActivity,
) : RouterEventHandler&lt;AppScreens&gt; {

    private fun getFragment(
        route: BallastExamples,
    ): Class&lt;out Fragment&gt; = when (route) {
        Home -&gt; HomeFragment::class.java
        PostList -&gt; PostListFragment::class.java
        PostDetails -&gt; PostDetailsFragment::class.java
    }

    override suspend fun RouterEventHandlerScope&lt;BallastExamples&gt;.handleEvent(
        event: RouterContract.Events&lt;BallastExamples&gt;
    ) = when (event) {
        is RouterContract.Events.BackstackChanged -&gt; {
            // figure out the Fragment to navigate to, and supply the Fragment with arguments parsed from the 
            // Destination URL
            val currentDestination = event.backstack.currentDestinationOrThrow
            val fragment = getFragment(currentDestination.originalRoute)
            val args = currentDestination.toBundle()

            // perform a fragment transaction
            activity
                .supportFragmentManager
                .beginTransaction()
                .replace(R.id.nav_host_fragment, fragment, args)
                .commit()

            Unit
        }

        is RouterContract.Events.BackstackEmptied -&gt; {
            // exit the application
            activity.finish()
        }

        is RouterContract.Events.NoChange -&gt; {
            // do nothing
        }
    }
}
</code></pre>
<article class="message is-info">

  <div class="message-body">
  <p><strong>Info</strong></p>
<p>If navigating with Android Fragments or Activities, use <code>Destination.Match.toBundle()</code> to capture the path and query
parameters and pass them into the destination Fragment via its arguments. That Fragment can then convert its arguments
back into the Ballast Navigation destination parameters with <code>Bundle.toDestinationParameters()</code> so that you can set up
parameter delegates within the class body. For example:</p>
<pre><code class="language-kotlin">class PostDetailsFragment : Fragment(), Destination.ParametersProvider {
    override val parameters: Destination.Parameters by lazy { requireArguments().toDestinationParameters() }
    private val postId by stringPath()
}
</code></pre>
  </div>
</article>
<h3 id="step-4-navigate"><a href="#step-4-navigate" id="step-4-navigate" class="anchor"></a>Step 4: Navigate!</h3>
<p>All that's left is to handle your application logic to send navigation requests to the Router! As the Router is just a
Ballast ViewModel, this is done by sending an <code>Input</code> to the Router requesting some change. There are several Inputs
available out-of-the-box, but you're free to create custom Inputs to handle more specialized navigation logic, by
extending the <code>RouterContract.Inputs</code> base class.</p>
<p>The available Inputs are:</p>
<ul>
<li><strong>RouterContract.Inputs.GoToDestination(destination: String)</strong>: Push a destination URL into the backstack,
attempting to match it against a registered Route. If the current destination was a mismatch, it will be removed, such
that only 1 destination in the backstack would be a Mismatch, and it would always be the last entry. If the
destinationUrl is the exact same as the current destination, then the navigation request will be ignored. This is
typically used for the application's main router, or anywhere you want to navigate forward and back (such as with an
Android phone's back gestures/hardware button).</li>
<li><strong>RouterContract.Inputs.ReplaceTopDestination(destination: String)</strong>: Pop the current destination off the backstack
before pushing a new destination in, using the same logic as with <code>RouterContract.GoToDestination</code>. This is typically
used for creating tabbed views or other &quot;lateral&quot; navigation, where the selected tab should not be affected by
backward navigation gestures.</li>
<li><strong>RouterContract.Inputs.GoBack()</strong>: Pop the current destination off the backstack, returning to the destination before
it. If there was only 1 entry in the backstack, then the <code>BackstackEmptied</code> event will be emitted to the EventHandler,
indicating that you should handle the case, such as by exiting the application.</li>
</ul>
<pre><code class="language-Kotlin">router.trySend(
    RouterContract.Inputs.GoToDestination(&quot;/app/posts/12345&quot;)
)
</code></pre>
<p>You'll notice that the Inputs to go to a Destination all take a String URL, rather than a Route. This is intentional, as
Routes should always come from the RoutingTable registered with the Router, and not be provided externally. Instead, you
navigate to a URL, and that URL is matched to a Route where it's parameters are parsed from the URL. This makes sure
you are not putting data into the Destination URL that cannot be easily serialized, and enforces the best practice of
only sending identifiers through the navigation request, rather than full objects. It also sets you up immediately to
handle deep-links without any special logic for translating those deep link URLs into discrete configuration objects, as
would be required by other &quot;type-safe&quot; routing libraries.</p>
<p>That said, Ballast Navigation makes it easy to generate a URL for a given Route, by using the <code>.directions()</code> extension
function. You can pass path and query parameters into this function, where it will insert them into the appropriate
places within the URL and return a String URL that will be matched by that same Route.</p>
<pre><code class="language-Kotlin">router.trySend(
    RouterContract.Inputs.GoToDestination(
        AppScreen.PostDetails
            .directions()
            .pathParameter(&quot;postId&quot;, postId.toString())
            .build()
    )
)
</code></pre>
<h2 id="route-matching"><a href="#route-matching" id="route-matching" class="anchor"></a>Route Matching</h2>
<p>The syntax used for matching Destinations to Routes is inspired by the patterns used for <a href="https://ktor.io/docs/routing-in-ktor.html#match_url">Ktor Server Routing</a>. In
fact, it was designed to be an extension of that syntax, but with additional support for matching query parameters, so
any routes used by Ktor should also be compatible with Ballast Navigation.</p>
<p>One significant difference from the Ktor syntax, however, is that Ballast Navigation requires query parameters to be
explicitly stated in the pattern, while Ktor does not have a syntax available to specify query parameters.</p>
<h3 id="path-format"><a href="#path-format" id="path-format" class="anchor"></a>Path Format</h3>
<p>The Path format is a sequence of path segments separated by a slash <code>/</code> character. The path must start with a slash, and
trailing slashes are ignored.</p>
<p>Most of the following documentation is taken directly from Ktor. If the Ktor syntax changes, you can expect that Ballast
Navigation will also be updated to match that change. Also, if you encounter a URL path format that works in Ktor but
not in Ballast Navigation, please open an issue so that this can be remedied.</p>
<p>The following examples taken from the Ktor documentation are also valid routes in Ballast Navigation:</p>
<ul>
<li><code>/hello</code>: A path containing a single path segment.</li>
<li><code>/order/shipment</code>: A path containing several path segments.</li>
<li><code>/user/{login}</code>: A path with the login path parameter, whose value can be accessed inside the route handler.</li>
<li><code>/user/*</code>: A path with a wildcard character that matches any path segment.</li>
<li><code>/user/{...}</code>: A path with a tailcard that matches all the rest of the URL path.</li>
<li><code>/user/{param...}</code>: A path containing a path parameter with tailcard.</li>
</ul>
<h4 id="wildcard"><a href="#wildcard" id="wildcard" class="anchor"></a>Wildcard</h4>
<p>A wildcard (<code>*</code>) matches any path segment and can't be missing. For example, <code>/user/*</code> matches <code>/user/john</code>, but doesn't
match <code>/user</code>.</p>
<h4 id="tailcard"><a href="#tailcard" id="tailcard" class="anchor"></a>Tailcard</h4>
<p>A tailcard (<code>{...}</code>) matches all the rest of the URL path, can include several path segments, and can be empty. For
example, <code>/user/{...}</code> matches <code>/user/john/settings</code> as well as <code>/user</code>.</p>
<p>If a Destination includes a names tailcard, its value can be accessed like
<code>destination.pathParamters[&quot;param&quot;]</code>.</p>
<h4 id="path-parameter"><a href="#path-parameter" id="path-parameter" class="anchor"></a>Path Parameter</h4>
<p>A path parameter (<code>{param}</code>) matches a path segment and captures it as a parameter named <code>param</code>. This path segment is
mandatory, but you can make it optional by adding a question mark: {<code>param?</code>}. <code>:param</code> can be used as an alternative
syntax for <code>{param}</code>, and cannot be made optional. For example:</p>
<ul>
<li><code>/user/{login}</code> matches <code>/user/john</code>, but doesn't match <code>/user</code>.</li>
<li><code>/user/:login</code> matches <code>/user/john</code>, but doesn't match <code>/user</code>.</li>
<li><code>/user/{login?}</code> matches <code>/user/john</code> as well as <code>/user</code>.</li>
</ul>
<p>Note that optional path parameters {param?} can only be used at the end of the path. Also, optional path parameters
cannot be used with a tailcard, you must choose one or the other.</p>
<p>If a Destination includes a path parameter, its value can be accessed like
<code>destination.pathParamters[&quot;param&quot;]</code>, or by using the delegate functions like
<code>val param: String by destination.stringPath()</code>, <code>val param: Int? by destination.optionalIntPath()</code>, etc.</p>
<h3 id="query-parameter-format"><a href="#query-parameter-format" id="query-parameter-format" class="anchor"></a>Query Parameter Format</h3>
<p>The Query String format is a sequence of <code>key=value</code> pairs separated by <code>&amp;</code>, separated from the path with <code>?</code>. Unlike
Ktor routes, Ballast Navigation requires all query parameters to be accounted for in the route format, and destinations
can be matched to different routes which have the same path but different query parameters.</p>
<p>The following examples are valid routes in Ballast Navigation:</p>
<ul>
<li><code>/hello?name=Ballast</code>: A query parameter where both the key and value are statically defined.</li>
<li><code>/greeting?name={!}</code>: Show a greeting, where a single name must be provided</li>
<li><code>/posts?sort={?}</code>: Display a list of posts, and optionally provide a value for how to sort the list</li>
<li><code>/email/compose?recipients={[!]}</code>: Compose an email to send to a list of recipients. You must have at least 1 recipient,
but may have more than 1. The destination URL collects multiple query parameters at the same key to the same list of
values, so even though only 1 key for <code>recipients</code> is present in this format, multiple <code>recipient=email</code> values may be
present in the destination.</li>
<li><code>/template/render?template={!}&amp;emailPreviewTo={[?]}&amp;{...}</code>: Render a template as HTML. The template filename must be
provided, and you may optionally pass a list of names to send a preview to. Any additional query parameters may be
passed through, which would be made available to the template language.</li>
</ul>
<h4 id="static-query"><a href="#static-query" id="static-query" class="anchor"></a>Static Query</h4>
<p>Static query parameters may be set to only match parameters with a specific value, using the standard URL query string
syntax of <code>?key1=value1&amp;key2=value2</code>. If you require a key to have a hardcoded list of values, you must use a list value
rather than multiple pairs with the same key, like <code>key=[value1,value2]</code>.</p>
<h4 id="query-parameter"><a href="#query-parameter" id="query-parameter" class="anchor"></a>Query Parameter</h4>
<p>Query parameters at a given key are defined with a syntax like <code>key={!}</code>. The value inside the braces determines how
many values are allowed at that key:</p>
<p><code>/route?one={!}</code>: require exactly 1 value
<code>/route?one={[!]}</code>: require 1 or more values
<code>/route?one={?}</code>: allow 0 or 1 value
<code>/route?one={[?]}</code>: allow 0 or more values</p>
<p>If a Destination includes query parameters, they ma be accessed like
<code>destination.queryParamters[&quot;param&quot;]</code>, or by using the delegate functions like
<code>val param: String by destination.stringQuery()</code>, <code>val param: Int? by destination.optionalIntQuery()</code>, etc.</p>
<h4 id="remaining-query"><a href="#remaining-query" id="remaining-query" class="anchor"></a>Remaining Query</h4>
<p>The remaining query is not defined as a key-value pair, but instead as <code>{...}</code>. It is effectively a Tailcard for query
parameters, where anything that was not matched from previous query parameters will be passed through. The remaining
query parameters may be empty.</p>
<p>If a Destination includes query parameters, they may be accessed like
<code>destination.queryParamters[&quot;param&quot;]</code>, or by using the delegate functions like
<code>val param: String by destination.stringQuery()</code>, <code>val param: Int? by destination.optionalIntQuery()</code>, etc.</p>
<h3 id="route-weights"><a href="#route-weights" id="route-weights" class="anchor"></a>Route Weights</h3>
<p>Routes in Ballast Navigation are weighted such that more &quot;specific&quot; formats will be matched before those with fewer
matching criteria. When a Route is parsed with <code>RouteMatcher.create(routeFormat)</code>, it will compute a weight for that
route (which is just an arbitrary Double), and the routes passed to the RoutingTable will be sorted by weight and
searched in that order for a match. The specific values defined as the weight for a route is not intended to be used for
anything meaningful other than relative ordering between routes, and the implementation for computing a route's weight
is subject to change.</p>
<p>The weighting algorithm is defined such that, by default, routes with more path segments or query parameters should be
selected over those with fewer, and statically defined values are more specific than parameters or wildcards.
Additionally, for routes with the same number of path segments and/or query parameters, paths segments are given a
higher weight. The more &quot;specific&quot; a route is, or the more path segments it has, the more likely it is to be matched
over less specific ones or ones with query parameters, though this is not necessarily a strict guarantee.</p>
<p>For example, <code>/one/{two?}?three={!}</code> and <code>/one?two={?}&amp;three={!}</code> will both match the destination <code>/one?three=four</code>,
but since the first route has an additional path segment it will be selected as the route over the second, even though
they both had 3 total &quot;url pieces&quot;. Likewise, the routes <code>/one/two</code> and <code>/one/{two}</code> will both match a URL of <code>/one/two</code>,
but the first route will be selected since all path segments are static, while the second route has dynamic parameters.</p>
<p>In some cases, you may have 2 routes with similar &quot;specificity&quot;, where the default weighting algorithm does not select
the route you expect. In this case, you can set a hardcoded weight for those routes rather than letting them be computed
automatically. This can be set in the call to <code>RouteMatcher.create(routeFormat)</code> within your Route enum class, by
overriding the <code>computeWeight</code> lambda. As you should not rely on any specific values for the computed weights, you
should manually define the weights for all affected routes to be higher than anything that could be computed. This is
most easily done by using weights on the order of <code>Double.MAX_VALUE</code> (<code>Double.MAX_VALUE - 1</code>, <code>Double.MAX_VALUE - 2</code>,
etc.) to ensure you do not assign a weight lower than would have been created algorithmically, making it harder to match
those routes.</p>
<pre><code class="language-kotlin">enum class AppScreen(
    routeFormat: String,
    hardcodedWeight: Double? = null,
    override val annotations: Set&lt;RouteAnnotation&gt; = emptySet(),
) : Route {
    Home(&quot;/app/home&quot;),
    PostList(&quot;/app/posts?sort={?}&quot;),
    PostDetails(&quot;/app/posts/{postId}&quot;),
    SimilarWithPath(&quot;/one/{two?}?three={!}&quot;, Double.MAX_VALUE - 2),
    SimilarWithQuery(&quot;/one?two={?}&amp;three={!}&quot;, Double.MAX_VALUE - 1), // this route will be selected over SimilarWithPath
    ;

    override val matcher: RouteMatcher = if(hardcodedWeight != null) {
        RouteMatcher.create(routeFormat) { path, query -&gt; hardcodedWeight }
    } else {
        RouteMatcher.create(routeFormat)
    }
}
</code></pre>
<h3 id="route-annotations"><a href="#route-annotations" id="route-annotations" class="anchor"></a>Route Annotations</h3>
<p>Route Annotations are a way to attach metadata to a Destination, either as part of the Route, or directly through the
navigation request. This metadata is never used for matching a Destination URL to a Route, but instead can be used to
help change how the Route is displayed (in a floating window vs. fullscreen, for example), or to help you navigate
through the backstack (popping off all destinations with a given tag). Internally, it is already in use to aid in
syncing the URL with the browser address bar.</p>
<article class="message is-warning">

  <div class="message-body">
  <p><strong>Warning</strong></p>
<p>This feature hasn't been thoroughly tested yet. Use it at your own risk, it may be changed or replaced in the future.</p>
  </div>
</article>
<article class="message is-danger">

  <div class="message-body">
  <p><strong>Danger</strong></p>
<p>Do not use Route Annotations for passing data between screens. Always pass information through path or query parameters,
or lift larger objects into a ViewModel or your Repository layer that is shared by the originating and destination
screens.</p>
  </div>
</article>
<p>A Route Annotation is a class that implements <code>RouteAnnotation</code>, which is simply a marker interface. This is intended to
require Route Annotations to be special classes used only for the purpose of metadata, and prevent you from passing
arbitrary data through the Annotation. You are free to create your own RouteAnnotations, but you should always treat
these classes as through they were like regular Kotlin <code>annotation classes</code>, containing only simple, constant,
serializable values. Additionally, there are a couple Route Annotations provided out-of-the-box for the use-cases
mentioned at the start of this section:</p>
<ul>
<li><code>Tag(&quot;tag name&quot;)</code>: Set a String tag to this route for aid in backstack navigation. For example, you can use tags to
define the routes in a navigation sub-graph, and then exit the entire flow by popping all destinations with that
flow's tag.</li>
<li><code>Floating</code>: Request the destination to be displayed in a Floating window. It's up to you to actually display the
destination's content like this.</li>
</ul>
<p>Route Annotations may be set on the Route, which will get added to every Destination matched to that Route:</p>
<pre><code class="language-kotlin">enum class AppScreen(
    routeFormat: String,
    override val annotations: Set&lt;RouteAnnotation&gt; = emptySet(),
) : Route {
    Home(&quot;/app/home&quot;),
    PostList(&quot;/app/posts?sort={?}&quot;),
    PostDetails(&quot;/app/posts/{postId}&quot;, annotations = setOf(Floating)), // request this route to be displayed in a floating window
    ;

    override val matcher: RouteMatcher = RouteMatcher.create(routeFormat)
}
</code></pre>
<p>You can also provide Route Annotations directly to the navigation request:</p>
<pre><code class="language-Kotlin">router.trySend(
    RouterContract.Inputs.GoToDestination(
        destination = &quot;/app/posts/12345&quot;,
        extraAnnotations = setOf(Floating), // normally this destination is displayed fullscreen, but this time only display it in a floating window
    )
)
</code></pre>
<p>All matched destinations will contain a Set of Route Annotations, which can be when displaying the backstack content or
during handling a navigation request in the <code>BackstackNavigator</code>. If you are doing anything where you must save and
restore the Backstack, these <code>RouteAnnotations</code> should generally be saved and restored along with the destination URLs.</p>
<h2 id="faqs"><a href="#faqs" id="faqs" class="anchor"></a>FAQs</h2>
<h3 id="why-make-yet-another-routing-library"><a href="#why-make-yet-another-routing-library" id="why-make-yet-another-routing-library" class="anchor"></a>Why make yet another routing library?</h3>
<p>The first reason, and why most people create new libraries, is that I was not happy with any of the existing solutions
out there. It's my opinion that Android's official navigation patterns (both the old, manual navigation, and the newer
Androidx Navigation library) encourage patterns in navigation that tend to lead to bad application architecture. And
unfortunately, most of the recent routing libraries I've tried seem to be copying that similar navigation patterns,
bringing Android's anti-patterns with them into the KMPP and Compose world. Compose and MVI as an ecosystem work because
they're not trying to copy old UIs patterns, so why are we still thinking that the old style of Navigation works?</p>
<p>Most notably, Android's navigation system encourages a pattern of navigating to one screen, and then to another, loading
specific data on those screens as you go. Whether this is done with navigation from Activity-to-Activity,
Fragment-to-Fragment, or by defining a specific navigation order through a declarative NavGraph explicitly linking
destinations to one another, this style of navigation usually leads to data being loaded on a specific screen vs being
loaded when requested, regardless of the screen requesting it. This becomes problematic when trying to implement
deep-links, when one needs to add explicit handling of the deep-link case to load the data that would have been loaded
on an earlier screen with the &quot;happy path&quot; navigation. Instead, I believe the web's pattern of every screen being
defined by a URL and the user may jump directly to any given screen encourages a better pattern where you cannot assume
any given sequence of screens was visited, and thus you must push the loading of data out of the UI and into the
Repository layer, where it belongs.</p>
<p>The second reason that I created this library is that I realized routing is really just an exercise in state management,
and Ballast is already very good at that. Routing libraries typically build up a subsystem for managing updates to the
state, and then build their routing logic within that, but because they're fundamentally <em>routing</em> libraries and not
<em>state management</em> libraries, the actual state management aspects of them are lacking.</p>
<p>But Ballast is already proven to be a stable, robust, and predicable state management library, and it was relatively
simple to add navigation on top of what already exists here. And in the process, Ballast Navigation gains all the
features of the other Ballast extension libraries for free (like logging, debugging, or undo/redo), both current and
future, which would otherwise either be hardcoded in hacky ways into those other libraries, or else completely absent.</p>
<h3 id="is-this-library-type-safe"><a href="#is-this-library-type-safe" id="is-this-library-type-safe" class="anchor"></a>Is this library type-safe?</h3>
<p>It depends on what you mean by type-safe. If, by that, you mean that routing is done with data classes that are just
passed around, then no, this library is not type-safe. It works by parsing a URL to extract data from the path and query
parameters, and those values are ultimately passed around as Strings, not as strongly-typed objects.</p>
<p>But if by type-safe you mean that when loading a route, you can easily ensure that the parameters exist and are of a
certain type, then yes, this library does support that. Route matching is strict and you manually define which
parameters must be present, and it offers a set of delegate functions to make it easy to extract those parameters in a
type-safe manner, preventing you to navigating to a route if the value is of an incorrect type. This style of routing is
not checked at compile time, unlike passing around a data class, but it actually has some other advantages that the
data-class argument-passing lacks:</p>
<ul>
<li>By forcing you to represent the data passed between routes as a URL, it encourages the best-practice of only passing
the minimal amount of data needed for the new route to load the full objects it needs. Quoting from the documentation
of <a href="https://developer.android.com/guide/navigation/navigation-pass-data">Androidx Navigation</a>, <em>&quot;In general, you should strongly prefer passing only the minimal amount of data between
destinations. For example, you should pass a key to retrieve an object rather than passing the object itself...If you
need to pass large amounts of data, consider using a ViewModel as described in 'Share data between fragments'.&quot;</em></li>
<li>You get deep-linking for free, since effectively <em>every</em> navigation request is a deep-link. If you have to pass
configuration/argument objects, you would have to manually parse a deep-link URL to that object before attempting to
navigate with it, which can cause problems if your URL-parsing logic differs from the rest of your application's
navigation logic.</li>
<li>KSP and Code Generation, or type-safe wrapper functions, can be easily added on top of this library, while it's more
difficult to take a library built with strong type-safety/code generation in mind and use it in any other way. This
eases the burden of evaluation or incremental adoption. For example, generating type-safe Directions functions and
arguments delegates could be done fairly easily, and the core routing APIs were intentionally designed to allow that
possibility, though it is not on the current roadmap for this library. This would be a very welcome addition from the
community, if someone wanted to create this as a KSP plugin!</li>
</ul>
<h3 id="does-this-library-integrate-with-compose"><a href="#does-this-library-integrate-with-compose" id="does-this-library-integrate-with-compose" class="anchor"></a>Does this library integrate with Compose?</h3>
<p>Yes! Everything you need to integrate Ballast Navigation into Compose is provided in the core artifact, without any need
for a special Compose integration library. Ballast Navigation ultimately just manages a backstack of URLs and emits it
to the UI as a <code>StateFlow</code>, which can be easily collected from Compose. Anything else that you would typically want from
a &quot;Compose integration&quot; is almost certainly too specific to your use-case to be included within the core Ballast
Navigation library, but is easy enough for you to implement yourself.</p>
<p>But when people typically ask this question, what they really are asking is, &quot;does it live entirely within Compose code,
and give me automatic transition animations and stuff like that&quot;. And the answer to this question is no, Ballast
Navigation is intentionally kept outside the UI. A community-designed library to connect Ballast Navigation to Compose
for things like Animations would be a very welcome addition, however!</p>
<p>For now, you can achieve basic transition animations with existing Compose UI APIs like <code>AnimatedContent</code>. Or if someone
wanted to help bring <a href="https://github.com/rjrjr/compose-backstack">rjrjr/compose-backstack</a> up-to-date with the latest Compose version and make it work with
Desktop, that would be the perfect companion library to Ballast Navigation!</p>
<h3 id="how-do-i-sync-destinations-with-the-browser-address-bar"><a href="#how-do-i-sync-destinations-with-the-browser-address-bar" id="how-do-i-sync-destinations-with-the-browser-address-bar" class="anchor"></a>How do I sync destinations with the browser address bar?</h3>
<p>When using Ballast Navigation in the browser, you may wish to show the current destination URL in the browser's address
bar to help the user understand the structure of your application, as well as allowing them to edit the URL to jump to
a specific screen, or save it as a bookmark.</p>
<p>This is included as built-in functionality, for synchronizing the router state with the browser's address bar in both
directions: applying router state to the address bar, and passing changes made by the user back into the router. It will
also take care of reading the current URL when the page first loads, and navigating directly to that route.</p>
<p>All that's needed to support this functionality is to add an Interceptor to the Router during creation. Both hash-based
routing and the <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">History API</a> are supported.</p>
<h4 id="browser-hash"><a href="#browser-hash" id="browser-hash" class="anchor"></a>Browser Hash</h4>
<p>Hash-based routing is the &quot;older&quot; mechanism for routing in a Single Page Application (SPA), though it should not be
considered obselete. In particular, one would have to set up server-side redirects to make the History API work, which
may not be feasible, in which case Hash-based routing is the only option left.</p>
<p>Hash-based routing can be added with the <code>BrowserHashNavigationInterceptor</code>, or with the <code>withBrowserHashRouter</code> helper
function.</p>
<pre><code class="language-kotlin">class RouterViewModel(
    viewModelCoroutineScope: CoroutineScope
) : BasicRouter&lt;AppScreens&gt;(
    config = BallastViewModelConfiguration.Builder()
        .withBrowserHashRouter(RoutingTable.fromEnum(AppScreens.values()), AppScreens.Home)
        .build(),
    eventHandler = eventHandler { },
    coroutineScope = viewModelCoroutineScope,
)
</code></pre>
<h4 id="browser-history"><a href="#browser-history" id="browser-history" class="anchor"></a>Browser History</h4>
<p>Hash-based routing is done with the <code>#</code> portion of the URL, and isn't as user-friendly to read and share as with just
a normal URL path. The <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">Browser History API</a> allows websites to edit the entire URL shown in the address bar
and navigate forward and backward through the screens of your SPA with the browser's native buttons, so users wouldn't
even know that you'ure doing front-end routing.</p>
<p>The caveat is that using the history API requires your hosting server to redirect all URLs to the SPA's main page. There
are plenty of tutorials online for configuring your server to do this, so I will not cover these details here.</p>
<p>Routing with the History API can be added with the <code>BrowserHistoryNavigationInterceptor</code>, or with the
<code>withBrowserHistoryRouter</code> helper function. Unlike the Hash interceptor, the History interceptor needs to know which
portion of the URL path is just the page itself, and which is used for routing within the application, so you must pass
the base path for this page into the interceptor.</p>
<pre><code class="language-kotlin">class RouterViewModel(
    viewModelCoroutineScope: CoroutineScope
) : BasicRouter&lt;AppScreens&gt;(
    config = BallastViewModelConfiguration.Builder()
        .withBrowserHistoryRouter(RoutingTable.fromEnum(AppScreens.values()), basePath = &quot;/app&quot;, initialRoute = AppScreens.Home)
        .build(),
    eventHandler = eventHandler { },
    coroutineScope = viewModelCoroutineScope,
)
</code></pre>
<p>I would recommend using the <code>BrowserHashNavigationInterceptor</code> when developing locally and switch it out for
<code>BrowserHistoryNavigationInterceptor</code> when deploying to production, so you don't have to mess with your Webpack dev
server configuration. There are several ways to determine if your running in production, such as checking the value of
<code>window.location.host</code>, setting a property as a hidden element in the page's HTML, or using something like
<a href="https://github.com/gmazzo/gradle-buildconfig-plugin">Gradle BuildConfig plugin</a> to inject a value from the build pipeline into the Kotlin code. But if you do want to
use the <code>BrowserHistoryNavigationInterceptor</code> in development, <a href="https://github.com/hfhbd/routing-compose#development-usage">routing-compose</a> has instructions for getting your
environment set up.</p>
<h3 id="how-does-this-library-handle-transition-animations"><a href="#how-does-this-library-handle-transition-animations" id="how-does-this-library-handle-transition-animations" class="anchor"></a>How does this library handle transition animations?</h3>
<p>It doesn't. Ballast Navigation just manages the backstack, but you can apply transition animations yourself when
handling route changes. Ballast Navigation intentionally keeps itself separate from the UI to allow maximum flexibility
and avoid bloat in its API.</p>
<h3 id="more-faqs"><a href="#more-faqs" id="more-faqs" class="anchor"></a>More FAQs</h3>
<p>See more FAQs <a href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation/faq">here</a></p>
<h2 id="full-code-snippet"><a href="#full-code-snippet" id="full-code-snippet" class="anchor"></a>Full Code Snippet</h2>
<p>The following snippet is a complete example of using Ballast for routing in a Compose application. You can
copy-and-paste it directly to your project to get started immediately, or see the <a href="https://copper-leaf.github.io/ballast/wiki/examples/navigation">Navigation example</a> and browse its
sources to see a more production-quality example implementation. The example repos also show examples of Ballast
Navigation in <a href="https://github.com/copper-leaf/ballast/tree/main/examples/web">Compose Web</a>, <a href="https://github.com/copper-leaf/ballast/tree/main/examples/desktop">Compose Desktop</a>, and <a href="https://github.com/copper-leaf/ballast/tree/main/examples/android">Fragment-based Android</a> applications. The Android
example also shows how one might use the <code>Floating</code> <code>RouteAnnotation</code> to display and given Route's content in a Dialog
rather than fullscreen.</p>
<pre><code class="language-kotlin">// Define your routes
enum class AppScreen(
    routeFormat: String,
    override val annotations: Set&lt;RouteAnnotation&gt; = emptySet(),
) : Route {
    Home(&quot;/app/home&quot;),
    PostList(&quot;/app/posts?sort={?}&quot;),
    PostDetails(&quot;/app/posts/{postId}&quot;),
    ;

    override val matcher: RouteMatcher = RouteMatcher.create(routeFormat)
}

@Composable
fun MainContent() {
    val applicationScope = rememberCoroutineScope()

    // Set up the Router, which is just a normal Ballast ViewModel
    val router: Router&lt;AppScreen&gt; = remember(applicationScope) {
        BasicRouter(
            coroutineScope = applicationScope,
            config = BallastViewModelConfiguration.Builder()
                .apply {
                    // log all Router activity to inspect the backstack changes
                    this += LoggingInterceptor()
                    logger = ::PrintlnLogger

                    // You may add any other Ballast Interceptors here as well, to extend the router functionality
                }
                .withRouter(RoutingTable.fromEnum(AppScreen.values()), initialRoute = AppScreen.Home)
                .build(),
            eventHandler = eventHandler {
                if (it is RouterContract.Events.BackstackEmptied) {
                    exitProcess(0)
                }
            },
        )
    }

    // collect the Router's StateFlow as a Compose State
    val routerState: Backstack&lt;AppScreen&gt; by router.observeStates().collectAsState()

    routerState.renderCurrentDestination(
        route = { appScreen -&gt;
            // the last entry in the backstack was matched to a route. We will switch on which route was matched,
            // and pull path and query parameters from the destination
            when (appScreen) {
                AppScreen.Home -&gt; {
                    HomeScreen()
                }

                AppScreen.PostList -&gt; {
                    val sort: String? by optionalStringQuery()
                    PostListScreen(
                        sort = sort,
                        onPostSelected = { postId: Long -&gt;
                            // The user selected a post within the PostListScreen. Generate a URL which will match
                            // to the PostDetails route, by using its directions to ensure the right parameters are
                            // provided in the URL
                            router.trySend(
                                RouterContract.Inputs.GoToDestination(
                                    AppScreen.PostDetails
                                        .directions()
                                        .pathParameter(&quot;postId&quot;, postId.toString())
                                        .build()
                                )
                            )
                        },
                    )
                }

                AppScreen.PostDetails -&gt; {
                    val postId: Long by longPath()
                    PostDetailsScreen(
                        postId = postId,
                        onBackClicked = {
                            // The user clicked the back button, notify the router to pop the latest destination off
                            // the backstack
                            router.trySend(
                                RouterContract.Inputs.GoBack()
                            )
                        },
                    )
                }
            }
        },
        notFound = {
            // the last entry in the backstack could not be matched to a route
            NotFoundScreen(mismatchedUrl = it)
        },
    )
}

@Composable
fun HomeScreen() {
    // omitted for brevity
}

@Composable
fun PostListScreen(sort: String?, onPostSelected: (Long) -&gt; Unit) {
    // omitted for brevity
}

@Composable
fun PostDetailsScreen(postId: Long, onBackClicked: () -&gt; Unit) {
    // omitted for brevity
}

@Composable
fun NotFoundScreen(mismatchedUrl: String) {
    // omitted for brevity
}
</code></pre>
<h2 id="installation"><a href="#installation" id="installation" class="anchor"></a>Installation</h2>
<pre><code class="language-kotlin">repositories {
    mavenCentral()
}

// for plain JVM or Android projects
dependencies {
    implementation(&quot;io.github.copper-leaf:ballast-navigation:4.2.1&quot;)
}

// for multiplatform projects
kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                implementation(&quot;io.github.copper-leaf:ballast-navigation:4.2.1&quot;)
            }
        }
    }
}
</code></pre>

</div>

                    
                
            
        
    
    <!-- end:inject components -->


  </div>
  
    <div class="column is-one-quarter is-hidden-touch">
      <div class="sticky-menu" style="position: sticky; top: 30px;">
  
  
    
<p class="menu-label">In This Page</p>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#overview" class="">
  
  Overview
  </a>
</li>

</ul>
  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#usage" class="">
  
  Usage
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#step-1-define-your-routes" class="">
  
  Step 1: Define your Routes
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#step-2-create-the-router-object" class="">
  
  Step 2: Create the Router object
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#step-3-handle-route-changes" class="">
  
  Step 3: Handle route changes
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#step-4-navigate" class="">
  
  Step 4: Navigate!
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#route-matching" class="">
  
  Route Matching
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#path-format" class="">
  
  Path Format
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#query-parameter-format" class="">
  
  Query Parameter Format
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#route-weights" class="">
  
  Route Weights
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#route-annotations" class="">
  
  Route Annotations
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    
<ul class="menu-list">

  

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#faqs" class="">
  
  FAQs
  </a>
</li>



  <li>
    <ul>
    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#why-make-yet-another-routing-library" class="">
  
  Why make yet another routing library?
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#is-this-library-type-safe" class="">
  
  Is this library type-safe?
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#does-this-library-integrate-with-compose" class="">
  
  Does this library integrate with Compose?
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#how-do-i-sync-destinations-with-the-browser-address-bar" class="">
  
  How do I sync destinations with the browser address bar?
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#how-does-this-library-handle-transition-animations" class="">
  
  How does this library handle transition animations?
  </a>
</li>


    
      

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#more-faqs" class="">
  
  More FAQs
  </a>
</li>


    
    </ul>
  </li>
</ul>

  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#full-code-snippet" class="">
  
  Full Code Snippet
  </a>
</li>

</ul>
  

  
  
    <ul class="menu-list">

<li>
  <!-- page=https://copper-leaf.github.io/ballast/wiki/modules/ballast-navigation 849922566 -->
  <!-- menuItem.page=  -->
  <a href="#installation" class="">
  
  Installation
  </a>
</li>

</ul>
  

</div>
    </div>
  
</div>

        </div>
      
      
      </article>
    
      <div class="grow"></div>
      <div class="page-footer">
      
        <nav class="pagination is-rounded footer-pagination" role="navigation" aria-label="pagination">

  <a class="pagination-previous" href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-test">
    <span class="icon"><i class="fas fa-chevron-left"></i></span>
    Ballast Test
  </a>



  <a class="pagination-next" href="https://copper-leaf.github.io/ballast/wiki/modules/ballast-analytics">
    Ballast Analytics
    <span class="icon"><i class="fas fa-chevron-right"></i></span>
  </a>

</nav>

<footer class="footer border-top">
  <div class="content is-small">
  <p>
  Site proudly built with <a href="https://orchid.run/">Orchid</a>.<br>
</p>

  </div>
</footer>

      
      </div>
    </div>
  </div>
</div>






    <!-- start:inject meta-components [bodyEnd] -->
    
    <!-- end:inject meta-components [bodyEnd] -->



    <!-- start:inject meta-components [bodyEnd] -->
    

        
            
        

        
    
    <!-- end:inject meta-components [bodyEnd] -->




<!-- start:inject scripts -->
<script defer data-search-pseudo-elements="true" src="https://copper-leaf.github.io/ballast/Copper/6f592938/releases/v5.4.0/js/all.js"></script>
<script  src="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/js/bulma.js"></script>
<script  src="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/js/bulma-accordion.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/Copper/6f592938/assets/js/bulma-tabs.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/lunr/lunr.js"></script>
<script  src="https://copper-leaf.github.io/ballast/assets/js/orchidSearch.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/components/prism-kotlin.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/components/prism-java.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/prism/1.17.1/components/prism-groovy.min.js"></script>
<script  src="https://copper-leaf.github.io/ballast/ajax/libs/mermaid/8.13.9/mermaid.min.js"></script>
<script >
;

document.addEventListener('DOMContentLoaded', function() {
    mermaid.init({}, "code.language-mermaid");
});
</script>
<script  src="https://copper-leaf.github.io/ballast/assets/scripts/mp-widget.js"></script>
<script >

if(document.getElementById("intellij-plugin-button") != null) {
    MarketplaceWidget.setupMarketplaceWidget('install', 18702, "#intellij-plugin-button");
}
if(document.getElementById("intellij-plugin-card") != null) {
    MarketplaceWidget.setupMarketplaceWidget('card', 18702, "#intellij-plugin-card");
}
</script>
<!-- end:inject scripts -->


</body>
</html>
